"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),n=(e=t)&&"object"==typeof e&&"default"in e?e.default:e,o=require("@reactour/utils"),r=require("@reactour/mask"),i=require("@reactour/popover"),s=require("@react-aria/focus"),l=require("@emotion/react");function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)t.indexOf(n=i[o])>=0||(r[n]=e[n]);return r}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var d=["hasHighligtedElems"],p={bottom:0,height:0,left:0,right:0,top:0,width:0,windowWidth:0,windowHeight:0};function h(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=!0);var r=!1,i=o.getWindow(),s=i.w,l=i.h;if(!t)return a({},o.getRect(e),{windowWidth:s,windowHeight:l,hasHighligtedElems:!1});for(var c,d=o.getRect(e),p={bottom:0,height:0,left:s,right:0,top:l,width:0},h=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,void 0):void 0}}(e))){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t);!(c=h()).done;){var f=document.querySelector(c.value);if(f&&"none"!==f.style.display&&"hidden"!==f.style.visibility){var v=o.getRect(f);r=!0,n||!e?(v.top<p.top&&(p.top=v.top),v.right>p.right&&(p.right=v.right),v.bottom>p.bottom&&(p.bottom=v.bottom),v.left<p.left&&(p.left=v.left),p.width=p.right-p.left,p.height=p.bottom-p.top):(v.top<d.top&&(d.top=v.top),v.right>d.right&&(d.right=v.right),v.bottom>d.bottom&&(d.bottom=v.bottom),v.left<d.left&&(d.left=v.left),d.width=d.right-d.left,d.height=d.bottom-d.top)}}var g=!(!n&&e)&&p.width>0&&p.height>0;return{left:(g?p:d).left,top:(g?p:d).top,right:(g?p:d).right,bottom:(g?p:d).bottom,width:(g?p:d).width,height:(g?p:d).height,windowWidth:s,windowHeight:l,hasHighligtedElems:r}}var f=function(e){var n=e.disableKeyboardNavigation,o=e.setCurrentStep,r=e.setIsOpen,i=e.stepsLength,s=e.disable,l=e.rtl;function a(e){var t,a,c;function u(){o((function(e){return Math.min(e+1,i-1)}))}function d(){o((function(e){return Math.max(e-1,0)}))}e.stopPropagation(),!0===n||s||(n&&(t=n.includes("esc"),a=n.includes("right"),c=n.includes("left")),27!==e.keyCode||t||(e.preventDefault(),r(!1)),39!==e.keyCode||a||(e.preventDefault(),l?d():u()),37!==e.keyCode||c||(e.preventDefault(),l?u():d()))}return t.useEffect((function(){return window.addEventListener("keydown",a,!1),function(){window.removeEventListener("keydown",a)}}),[s]),null},v={badge:function(){return{position:"absolute",fontFamily:"monospace",background:"var(--reactour-accent,#007aff)",height:"1.875em",lineHeight:2,paddingLeft:"0.8125em",paddingRight:"0.8125em",fontSize:"1em",borderRadius:"1.625em",color:"white",textAlign:"center",boxShadow:"0 0.25em 0.5em rgba(0, 0, 0, 0.3)",top:"-0.8125em",left:"-0.8125em"}},controls:function(){return{display:"flex",marginTop:24,alignItems:"center",justifyContent:"space-between"}},navigation:function(){return{counterReset:"dot",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"}},button:function(e){return{display:"block",padding:0,border:0,background:"none",cursor:e.disabled?"not-allowed":"pointer"}},arrow:function(e){var t=e.disabled;return{color:t?"#caccce":"#646464",width:16,height:12,flex:"0 0 16px","&:hover":{color:t?"#caccce":"#000"}}},dot:function(e){var t=e.current;return{counterIncrement:"dot",width:8,height:8,border:t?"0":"1px solid #caccce",borderRadius:"100%",padding:0,display:"block",margin:4,transition:"opacity 0.3s, transform 0.3s",cursor:e.disabled?"not-allowed":"pointer",transform:"scale("+(t?1.25:1)+")",color:t?"var(--reactour-accent, #007aff)":"#caccce",background:t?"var(--reactour-accent, #007aff)":"none","&:before":{content:"counter(dot)",position:"absolute",bottom:"calc(100% + 0.25em)",left:"50%",opacity:0,transform:"translate(-50%, 1em)",transition:"0.3s",display:e.showNumber?"block":"none"},"&:hover":{backgroundColor:"currentColor","&:before":{opacity:.5,transform:"translate(-50%, -2px)"}}}},close:function(e){var t=e.disabled;return{position:"absolute",top:22,right:22,width:9,height:9,color:t?"#caccce":"#5e5e5e","&:hover":{color:t?"#caccce":"#000"}}}};function g(e){return function(t,n){var o=v[t](n),r=e[t];return r?r(o,n):o}}var b=["styles","onClick","disabled"],m=function(e){var t=e.styles,n=e.inverted,o=void 0!==n&&n,r=e.disabled,i=g(void 0===t?{}:t);return l.jsx("svg",{viewBox:"0 0 18.4 14.4",css:i("arrow",{inverted:o,disabled:r})},l.jsx("path",{d:o?"M17 7.2H1M10.8 1L17 7.2l-6.2 6.2":"M1.4 7.2h16M7.6 1L1.4 7.2l6.2 6.2",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeMiterlimit:"10"}))},y={Badge:function(e){var t=e.styles,n=e.children,o=g(void 0===t?{}:t);return l.jsx("span",{css:o("badge",{})},n)},Close:function(e){var t=e.styles,n=void 0===t?{}:t,o=e.onClick,r=e.disabled,i=c(e,b),s=g(n);return l.jsx("button",Object.assign({css:a({},s("button",{}),s("close",{disabled:r})),onClick:o},i),l.jsx("svg",{viewBox:"0 0 9.1 9.1","aria-hidden":!0,role:"presentation"},l.jsx("path",{fill:"currentColor",d:"M5.9 4.5l2.8-2.8c.4-.4.4-1 0-1.4-.4-.4-1-.4-1.4 0L4.5 3.1 1.7.3C1.3-.1.7-.1.3.3c-.4.4-.4 1 0 1.4l2.8 2.8L.3 7.4c-.4.4-.4 1 0 1.4.2.2.4.3.7.3s.5-.1.7-.3L4.5 6l2.8 2.8c.3.2.5.3.8.3s.5-.1.7-.3c.4-.4.4-1 0-1.4L5.9 4.5z"})))},Content:function(e){var t=e.content;return"function"==typeof t?t({setCurrentStep:e.setCurrentStep,transition:e.transition,isHighlightingObserved:e.isHighlightingObserved,currentStep:e.currentStep,setIsOpen:e.setIsOpen}):t},Navigation:function(e){var t=e.styles,n=void 0===t?{}:t,o=e.steps,r=e.setCurrentStep,i=e.currentStep,s=e.setIsOpen,a=e.nextButton,c=e.prevButton,u=e.disableDots,d=e.hideButtons,p=e.disableAll,h=e.rtl,f=e.Arrow,v=void 0===f?m:f,b=o.length,y=g(n),w=function(e){var t=e.onClick,o=e.kind,s=void 0===o?"next":o,a=e.children,c=e.hideArrow;return l.jsx("button",{css:y("button",{kind:s,disabled:p||("next"===s?b-1===i:0===i)}),onClick:function(){p||(t&&"function"==typeof t?t():r("next"===s?Math.min(i+1,b-1):Math.max(i-1,0)))},"aria-label":"Go to "+s+" step"},c?null:l.jsx(v,{styles:n,inverted:h?"prev"===s:"next"===s,disabled:p||("next"===s?b-1===i:0===i)}),a)};return l.jsx("div",{css:y("controls",{}),dir:h?"rtl":"ltr"},d?null:c&&"function"==typeof c?c({Button:w,setCurrentStep:r,currentStep:i,stepsLength:b,setIsOpen:s}):l.jsx(w,{kind:"prev"}),l.jsx("div",{css:y("navigation",{})},Array.from({length:b},(function(e,t){return t})).map((function(e){var t;return l.jsx("button",{css:y("dot",{current:e===i,disabled:u||p}),onClick:function(){u||p||r(e)},key:"navigation_dot_"+e,"aria-label":(null==(t=o[e])?void 0:t.navDotAriaLabel)||"Go to step "+(e+1)})}))),d?null:a&&"function"==typeof a?a({Button:w,setCurrentStep:r,currentStep:i,stepsLength:b,setIsOpen:s}):l.jsx(w,null))},Arrow:m},w=function(e){var t=e.styles,o=e.components,r=e.badgeContent,i=e.accessibilityOptions,s=e.disabledActions,c=e.onClickClose,u=e.steps,d=e.setCurrentStep,p=e.currentStep,h=e.transition,f=e.isHighlightingObserved,v=e.setIsOpen,g=e.nextButton,b=e.prevButton,m=e.disableDotsNavigation,w=e.rtl,S=e.showPrevNextButtons,C=void 0===S||S,k=e.showCloseButton,x=void 0===k||k,O=e.showNavigation,A=void 0===O||O,j=e.showBadge,E=void 0===j||j,I=u[p],L=a({},y,void 0===o?{}:o),N=L.Badge,B=L.Close,H=L.Content,M=L.Navigation,P=L.Arrow,T=r&&"function"==typeof r?r({currentStep:p,totalSteps:u.length,transition:h}):p+1;return l.jsx(n.Fragment,null,E?l.jsx(N,{styles:t},T):null,x?l.jsx(B,{styles:t,"aria-label":null==i?void 0:i.closeButtonAriaLabel,disabled:s,onClick:function(){s||(c&&"function"==typeof c?c({setCurrentStep:d,setIsOpen:v,currentStep:p}):v(!1))}}):null,l.jsx(H,{content:null==I?void 0:I.content,setCurrentStep:d,currentStep:p,transition:h,isHighlightingObserved:f,setIsOpen:v}),A?l.jsx(M,{setCurrentStep:d,currentStep:p,setIsOpen:v,steps:u,styles:t,"aria-hidden":!(null!=i&&i.showNavigationScreenReaders),nextButton:g,prevButton:b,disableDots:m,hideButtons:!C,disableAll:s,rtl:w,Arrow:P}):null)},S=["currentStep","setCurrentStep","setIsOpen","steps","styles","scrollSmooth","afterOpen","beforeClose","padding","position","onClickMask","onClickHighlighted","className","maskClassName","highlightedMaskClassName","disableInteraction","disableFocusLock","disableKeyboardNavigation","inViewThreshold","disabledActions","setDisabledActions","rtl","accessibilityOptions","ContentComponent"],C=function(e){var s=e.currentStep,l=e.setCurrentStep,u=e.setIsOpen,v=e.steps,g=void 0===v?[]:v,b=e.styles,m=void 0===b?{}:b,y=e.scrollSmooth,C=e.afterOpen,x=e.beforeClose,O=e.padding,A=void 0===O?10:O,j=e.position,E=e.onClickMask,I=e.onClickHighlighted,L=e.className,N=void 0===L?"reactour__popover":L,B=e.maskClassName,H=void 0===B?"reactour__mask":B,M=e.highlightedMaskClassName,P=e.disableInteraction,T=e.disableFocusLock,D=e.disableKeyboardNavigation,R=e.inViewThreshold,z=e.disabledActions,q=e.setDisabledActions,F=e.rtl,_=e.accessibilityOptions,V=void 0===_?{closeButtonAriaLabel:"Close Tour",showNavigationScreenReaders:!0}:_,W=e.ContentComponent,K=c(e,S),G=g[s],U=(null==G?void 0:G.styles)||m,$=function(e,n){void 0===n&&(n={block:"center",behavior:"smooth",inViewThreshold:0});var r=t.useState(!1),i=r[0],s=r[1],l=t.useState(!1),u=l[0],f=l[1],v=t.useState(!1),g=v[0],b=v[1],m=t.useState(null),y=m[0],w=m[1],S=t.useState(p),C=S[0],k=S[1],x=(null==e?void 0:e.selector)instanceof Element?null==e?void 0:e.selector:document.querySelector(null==e?void 0:e.selector),O=t.useCallback((function(){k(h(x,null==e?void 0:e.highlightedSelectors,null==e?void 0:e.bypassElem))}),[x,null==e?void 0:e.highlightedSelectors]);return t.useEffect((function(){return O(),window.addEventListener("resize",O),function(){return window.removeEventListener("resize",O)}}),[x,null==e?void 0:e.highlightedSelectors,y]),t.useEffect((function(){!o.inView(a({},C,{threshold:n.inViewThreshold}))&&x&&(s(!0),o.smoothScroll(x,n).then((function(){u||w(Date.now())})).finally((function(){s(!1)})))}),[C]),{sizes:C,transition:i,target:x,observableRefresher:function(){f(!0);var t=h(x,null==e?void 0:e.highlightedSelectors,null==e?void 0:e.bypassElem),n=t.hasHighligtedElems,o=c(t,d);b(n),k(o),f(!1)},isHighlightingObserved:g}}(G,{block:"center",behavior:y?"smooth":"auto",inViewThreshold:R}),J=$.sizes,Q=$.transition,X=$.observableRefresher,Y=$.isHighlightingObserved,Z=$.target;t.useEffect((function(){return C&&"function"==typeof C&&C(Z),function(){x&&"function"==typeof x&&x(Z)}}),[]);var ee=function(e){return"object"==typeof e&&null!==e?{maskPadding:e.mask,popoverPadding:e.popover}:{maskPadding:e,popoverPadding:e}}((null==G?void 0:G.padding)||A),te=ee.maskPadding,ne=ee.popoverPadding,oe=null!=G&&G.stepInteraction?!(null!=G&&G.stepInteraction):P;t.useEffect((function(){null!=G&&G.action&&"function"==typeof(null==G?void 0:G.action)&&(null==G||G.action(Z)),void 0!==(null==G?void 0:G.disableActions)&&q(null==G?void 0:G.disableActions)}),[G]);var re=Q?"center":null!=G&&G.position?null==G?void 0:G.position:j;return G?n.createElement(o.Portal,null,n.createElement(k,{disabled:T},n.createElement(o.Observables,{mutationObservables:null==G?void 0:G.mutationObservables,resizeObservables:null==G?void 0:G.resizeObservables,refresh:X}),n.createElement(f,{setCurrentStep:l,setIsOpen:u,stepsLength:g.length,disableKeyboardNavigation:D,disable:z,rtl:F}),n.createElement(r.Mask,{sizes:J,onClick:function(){z||(E&&"function"==typeof E?E({setCurrentStep:l,setIsOpen:u,currentStep:s,steps:g}):u(!1))},styles:a({highlightedArea:function(e){return a({},e,{display:oe?"block":"none"})}},U),padding:te,highlightedAreaClassName:M,className:H,onClickHighlighted:I}),n.createElement(i.Popover,{sizes:J,styles:U,position:re,padding:ne,"aria-labelledby":null==V?void 0:V.ariaLabelledBy,className:N,refresher:s},n.createElement(W||w,Object.assign({styles:U,setCurrentStep:l,currentStep:s,setIsOpen:u,steps:g,accessibilityOptions:V,disabledActions:z,transition:Q,isHighlightingObserved:Y,rtl:F},K))))):null},k=function(e){var t=e.children;return e.disabled?n.createElement(n.Fragment,null,t):n.createElement(s.FocusScope,{contain:!0,autoFocus:!0,restoreFocus:!0},t)},x=["children","defaultOpen","startAt","steps","setCurrentStep","currentStep"],O=n.createContext({isOpen:!1,setIsOpen:function(){return!1},currentStep:0,setCurrentStep:function(){return 0},steps:[],setSteps:function(){return[]},disabledActions:!1,setDisabledActions:function(){return!1},components:{}});function A(){return t.useContext(O)}exports.Tour=C,exports.TourContext=O,exports.TourProvider=function(e){var o=e.children,r=e.defaultOpen,i=void 0!==r&&r,s=e.startAt,l=void 0===s?0:s,u=e.steps,d=e.setCurrentStep,p=e.currentStep,h=c(e,x),f=t.useState(i),v=f[0],g=f[1],b=t.useState(l),m=b[0],y=b[1],w=t.useState(u),S=w[0],k=w[1],A=t.useState(!1),j=a({isOpen:v,setIsOpen:g,currentStep:p||m,setCurrentStep:d||y,steps:S,setSteps:k,disabledActions:A[0],setDisabledActions:A[1]},h);return n.createElement(O.Provider,{value:j},o,v?n.createElement(C,Object.assign({},j)):null)},exports.components=y,exports.default=C,exports.useTour=A,exports.withTour=function(e){return function(t){var o=A();return n.createElement(e,Object.assign({},t,o))}};
//# sourceMappingURL=tour.cjs.production.min.js.map
