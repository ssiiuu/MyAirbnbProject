{"version":3,"file":"tour.esm.js","sources":["../src/hooks.tsx","../src/Keyboard.tsx","../src/styles.tsx","../src/components/Badge.tsx","../src/components/Close.tsx","../src/components/Content.tsx","../src/components/Navigation.tsx","../src/components/index.tsx","../src/components/PopoverContent.tsx","../src/Tour.tsx","../src/Context.tsx","../src/withTour.tsx"],"sourcesContent":["import { useEffect, useCallback, useState } from 'react'\nimport { inView, smoothScroll, getWindow, getRect } from '@reactour/utils'\nimport { StepType } from './types'\n\nlet initialState = {\n  bottom: 0,\n  height: 0,\n  left: 0,\n  right: 0,\n  top: 0,\n  width: 0,\n  windowWidth: 0,\n  windowHeight: 0,\n}\n\nexport function useSizes(\n  step: StepType,\n  scrollOptions: ScrollIntoViewOptions & {\n    inViewThreshold?: number | { x?: number; y?: number }\n  } = {\n    block: 'center',\n    behavior: 'smooth',\n    inViewThreshold: 0,\n  }\n) {\n  const [transition, setTransition] = useState(false)\n  const [observing, setObserving] = useState(false)\n  const [isHighlightingObserved, setIsHighlightingObserved] = useState(false)\n  const [refresher, setRefresher] = useState(null as any)\n  const [dimensions, setdDimensions] = useState(initialState)\n  const target =\n    step?.selector instanceof Element\n      ? step?.selector\n      : document.querySelector(step?.selector)\n\n  const handleResize = useCallback(() => {\n    // if (!target && !step?.highlightedSelectors) return\n    setdDimensions(\n      getHighlightedRect(target, step?.highlightedSelectors, step?.bypassElem)\n    )\n  }, [target, step?.highlightedSelectors])\n\n  useEffect(() => {\n    handleResize()\n    window.addEventListener('resize', handleResize)\n    return () => window.removeEventListener('resize', handleResize)\n  }, [target, step?.highlightedSelectors, refresher])\n\n  useEffect(() => {\n    const isInView = inView({\n      ...dimensions,\n      threshold: scrollOptions.inViewThreshold,\n    })\n    // TODO: - Solve cases when no target but highlightedSelectors\n    if (!isInView && target) {\n      setTransition(true)\n      smoothScroll(target, scrollOptions)\n        .then(() => {\n          if (!observing) setRefresher(Date.now())\n        })\n        .finally(() => {\n          setTransition(false)\n        })\n    }\n  }, [dimensions])\n\n  function observableRefresher() {\n    setObserving(true)\n    const { hasHighligtedElems, ...dimesions } = getHighlightedRect(\n      target,\n      step?.highlightedSelectors,\n      step?.bypassElem\n    )\n    setIsHighlightingObserved(hasHighligtedElems)\n    setdDimensions(dimesions)\n    setObserving(false)\n  }\n\n  return {\n    sizes: dimensions,\n    transition,\n    target,\n    observableRefresher,\n    isHighlightingObserved,\n  }\n}\n\nfunction getHighlightedRect(\n  node: Element | null,\n  highlightedSelectors: string[] = [],\n  bypassElem = true\n) {\n  let hasHighligtedElems = false\n  const { w: windowWidth, h: windowHeight } = getWindow()\n  if (!highlightedSelectors) {\n    return {\n      ...getRect(node),\n      windowWidth,\n      windowHeight,\n      hasHighligtedElems: false,\n    }\n  }\n\n  let attrs = getRect(node)\n  let altAttrs = {\n    bottom: 0,\n    height: 0,\n    left: windowWidth,\n    right: 0,\n    top: windowHeight,\n    width: 0,\n  }\n\n  for (const selector of highlightedSelectors) {\n    const element = document.querySelector(selector) as HTMLElement\n    if (\n      !element ||\n      element.style.display === 'none' ||\n      element.style.visibility === 'hidden'\n    ) {\n      continue\n    }\n\n    const rect = getRect(element)\n    hasHighligtedElems = true\n    if (bypassElem || !node) {\n      if (rect.top < altAttrs.top) {\n        altAttrs.top = rect.top\n      }\n\n      if (rect.right > altAttrs.right) {\n        altAttrs.right = rect.right\n      }\n\n      if (rect.bottom > altAttrs.bottom) {\n        altAttrs.bottom = rect.bottom\n      }\n\n      if (rect.left < altAttrs.left) {\n        altAttrs.left = rect.left\n      }\n\n      altAttrs.width = altAttrs.right - altAttrs.left\n      altAttrs.height = altAttrs.bottom - altAttrs.top\n    } else {\n      if (rect.top < attrs.top) {\n        attrs.top = rect.top\n      }\n\n      if (rect.right > attrs.right) {\n        attrs.right = rect.right\n      }\n\n      if (rect.bottom > attrs.bottom) {\n        attrs.bottom = rect.bottom\n      }\n\n      if (rect.left < attrs.left) {\n        attrs.left = rect.left\n      }\n\n      attrs.width = attrs.right - attrs.left\n      attrs.height = attrs.bottom - attrs.top\n    }\n  }\n\n  const bypassable =\n    bypassElem || !node ? altAttrs.width > 0 && altAttrs.height > 0 : false\n\n  return {\n    left: (bypassable ? altAttrs : attrs).left,\n    top: (bypassable ? altAttrs : attrs).top,\n    right: (bypassable ? altAttrs : attrs).right,\n    bottom: (bypassable ? altAttrs : attrs).bottom,\n    width: (bypassable ? altAttrs : attrs).width,\n    height: (bypassable ? altAttrs : attrs).height,\n    windowWidth,\n    windowHeight,\n    hasHighligtedElems,\n  }\n}\n","import React, { Dispatch, useEffect } from 'react'\nimport { KeyboardParts } from './types'\n\nconst Keyboard: React.FC<KeyboardProps> = ({\n  disableKeyboardNavigation,\n  setCurrentStep,\n  setIsOpen,\n  stepsLength,\n  disable,\n  rtl,\n}) => {\n  function keyDownHandler(e: any) {\n    e.stopPropagation()\n\n    if (disableKeyboardNavigation === true || disable) {\n      return\n    }\n    let isEscDisabled, isRightDisabled, isLeftDisabled\n    if (disableKeyboardNavigation) {\n      isEscDisabled = disableKeyboardNavigation.includes('esc')\n      isRightDisabled = disableKeyboardNavigation.includes('right')\n      isLeftDisabled = disableKeyboardNavigation.includes('left')\n    }\n    function next() {\n      setCurrentStep(c => Math.min(c + 1, stepsLength - 1))\n    }\n\n    function prev() {\n      setCurrentStep(c => Math.max(c - 1, 0))\n    }\n    if (e.keyCode === 27 && !isEscDisabled) {\n      e.preventDefault()\n      setIsOpen(false)\n    }\n    if (e.keyCode === 39 && !isRightDisabled) {\n      e.preventDefault()\n      if (rtl) {\n        prev()\n      } else {\n        next()\n      }\n    }\n    if (e.keyCode === 37 && !isLeftDisabled) {\n      e.preventDefault()\n      if (rtl) {\n        next()\n      } else {\n        prev()\n      }\n    }\n  }\n\n  useEffect(() => {\n    window.addEventListener('keydown', keyDownHandler, false)\n    return () => {\n      window.removeEventListener('keydown', keyDownHandler)\n    }\n  }, [disable])\n\n  return null\n}\n\nexport type KeyboardProps = {\n  disableKeyboardNavigation?: boolean | KeyboardParts[]\n  setCurrentStep: Dispatch<React.SetStateAction<number>>\n  setIsOpen: Dispatch<React.SetStateAction<Boolean>>\n  stepsLength: number\n  disable?: boolean\n  rtl?: boolean\n}\n\nexport default Keyboard\n","export type StylesKeys =\n  | 'badge'\n  | 'controls'\n  | 'navigation'\n  | 'button'\n  | 'arrow'\n  | 'dot'\n  | 'close'\n\nexport type StylesObj = {\n  [key in StylesKeys]?: StyleFn\n}\n\nexport type StyleFn = (\n  props: { [key: string]: any },\n  state?: { [key: string]: any }\n) => React.CSSProperties\n\nexport type Styles = {\n  badge: StyleFn\n  controls: StyleFn\n  navigation: StyleFn\n  button: StyleFn\n  arrow: StyleFn\n  dot: StyleFn\n  close: StyleFn\n}\n\nexport type StyleKey = keyof Styles\n\nexport const defaultStyles: Styles = {\n  badge: () => ({\n    position: 'absolute',\n    fontFamily: 'monospace',\n    background: 'var(--reactour-accent,#007aff)',\n    height: '1.875em',\n    lineHeight: 2,\n    paddingLeft: '0.8125em',\n    paddingRight: '0.8125em',\n    fontSize: '1em',\n    borderRadius: '1.625em',\n    color: 'white',\n    textAlign: 'center',\n    boxShadow: '0 0.25em 0.5em rgba(0, 0, 0, 0.3)',\n    top: '-0.8125em',\n    left: '-0.8125em',\n  }),\n  controls: () => ({\n    display: 'flex',\n    marginTop: 24,\n    alignItems: 'center',\n    justifyContent: 'space-between',\n  }),\n  navigation: () => ({\n    counterReset: 'dot',\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    flexWrap: 'wrap',\n  }),\n  button: ({ disabled }) => ({\n    display: 'block',\n    padding: 0,\n    border: 0,\n    background: 'none',\n    cursor: disabled ? 'not-allowed' : 'pointer',\n  }),\n  arrow: ({ disabled }) => ({\n    color: disabled ? '#caccce' : '#646464',\n    width: 16,\n    height: 12,\n    flex: '0 0 16px',\n    '&:hover': {\n      color: disabled ? '#caccce' : '#000',\n    },\n  }),\n  dot: ({ current, disabled, showNumber }) => ({\n    counterIncrement: 'dot',\n    width: 8,\n    height: 8,\n    border: current ? '0' : '1px solid #caccce',\n    borderRadius: '100%',\n    padding: 0,\n    display: 'block',\n    margin: 4,\n    transition: 'opacity 0.3s, transform 0.3s',\n    cursor: disabled ? 'not-allowed' : 'pointer',\n    transform: `scale(${current ? 1.25 : 1})`,\n    color: current ? 'var(--reactour-accent, #007aff)' : '#caccce',\n    background: current ? 'var(--reactour-accent, #007aff)' : 'none',\n    '&:before': {\n      content: 'counter(dot)',\n      position: 'absolute',\n      bottom: 'calc(100% + 0.25em)',\n      left: '50%',\n      opacity: 0,\n      transform: 'translate(-50%, 1em)',\n      transition: '0.3s',\n      display: showNumber ? 'block' : 'none',\n    },\n    '&:hover': {\n      backgroundColor: 'currentColor',\n      '&:before': {\n        opacity: 0.5,\n        transform: 'translate(-50%, -2px)',\n      },\n    },\n  }),\n  close: ({ disabled }) => ({\n    position: 'absolute',\n    top: 22,\n    right: 22,\n    width: 9,\n    height: 9,\n    color: disabled ? '#caccce' : '#5e5e5e',\n    '&:hover': {\n      color: disabled ? '#caccce' : '#000',\n    },\n  }),\n}\n\nexport type getStylesType = (key: StylesKeys, extra?: any) => {}\n\nexport function stylesMatcher(styles: StylesObj) {\n  return (key: StyleKey, state: {}): {} => {\n    const base = defaultStyles[key](state)\n    const custom = styles[key]\n    return custom ? custom(base, state) : base\n  }\n}\n","/** @jsx jsx */\nimport { jsx } from '@emotion/react'\nimport React from 'react'\nimport { StylesObj, stylesMatcher } from '../styles'\n\nconst Badge: React.FC<BadgeProps> = ({ styles = {}, children }) => {\n  const getStyles = stylesMatcher(styles)\n  return <span css={getStyles('badge', {})}>{children}</span>\n}\n\nexport type BadgeProps = {\n  styles?: StylesObj\n}\n\nexport default Badge\n","/** @jsx jsx */\nimport { jsx } from '@emotion/react'\nimport React from 'react'\nimport { StylesObj, stylesMatcher } from '../styles'\n\nconst Close: React.FC<CloseProps> = ({\n  styles = {},\n  onClick,\n  disabled,\n  ...props\n}) => {\n  const getStyles = stylesMatcher(styles)\n  return (\n    <button\n      css={{ ...getStyles('button', {}), ...getStyles('close', { disabled }) }}\n      onClick={onClick}\n      {...props}\n    >\n      <svg viewBox=\"0 0 9.1 9.1\" aria-hidden role=\"presentation\">\n        <path\n          fill=\"currentColor\"\n          d=\"M5.9 4.5l2.8-2.8c.4-.4.4-1 0-1.4-.4-.4-1-.4-1.4 0L4.5 3.1 1.7.3C1.3-.1.7-.1.3.3c-.4.4-.4 1 0 1.4l2.8 2.8L.3 7.4c-.4.4-.4 1 0 1.4.2.2.4.3.7.3s.5-.1.7-.3L4.5 6l2.8 2.8c.3.2.5.3.8.3s.5-.1.7-.3c.4-.4.4-1 0-1.4L5.9 4.5z\"\n        />\n      </svg>\n    </button>\n  )\n}\n\nexport type CloseProps = {\n  styles?: StylesObj\n  onClick?: () => void\n  disabled?: boolean\n}\n\nexport default Close\n","import React, { Dispatch } from 'react'\n\nconst Content: React.FC<ContentProps> = ({\n  content,\n  setCurrentStep,\n  transition,\n  isHighlightingObserved,\n  currentStep,\n  setIsOpen,\n}) => {\n  return typeof content === 'function'\n    ? content({\n        setCurrentStep,\n        transition,\n        isHighlightingObserved,\n        currentStep,\n        setIsOpen,\n      })\n    : content\n}\n\nexport type ContentProps = {\n  content: any\n  setCurrentStep: Dispatch<React.SetStateAction<number>>\n  setIsOpen?: Dispatch<React.SetStateAction<Boolean>>\n  currentStep: number\n  transition?: boolean\n  isHighlightingObserved?: boolean\n}\n\nexport default Content\n","/** @jsx jsx */\nimport { jsx } from '@emotion/react'\nimport React, { Dispatch, ComponentType } from 'react'\nimport { StylesObj, stylesMatcher } from '../styles'\nimport { StepType, BtnFnProps, NavButtonProps } from '../types'\n\nconst Navigation: React.FC<NavigationProps> = ({\n  styles = {},\n  steps,\n  setCurrentStep,\n  currentStep,\n  setIsOpen,\n  nextButton,\n  prevButton,\n  disableDots,\n  hideButtons,\n  disableAll,\n  rtl,\n  Arrow = DefaultArrow,\n}) => {\n  const stepsLength = steps.length\n  const getStyles = stylesMatcher(styles)\n\n  const Button: React.FC<NavButtonProps> = ({\n    onClick,\n    kind = 'next',\n    children,\n    hideArrow,\n  }) => {\n    function clickHandler() {\n      if (!disableAll) {\n        if (onClick && typeof onClick === 'function') {\n          onClick()\n        } else {\n          if (kind === 'next') {\n            setCurrentStep(Math.min(currentStep + 1, stepsLength - 1))\n          } else {\n            setCurrentStep(Math.max(currentStep - 1, 0))\n          }\n        }\n      }\n    }\n\n    return (\n      <button\n        css={getStyles('button', {\n          kind,\n          disabled: disableAll\n            ? disableAll\n            : kind === 'next'\n            ? stepsLength - 1 === currentStep\n            : currentStep === 0,\n        })}\n        onClick={clickHandler}\n        aria-label={`Go to ${kind} step`}\n      >\n        {!hideArrow ? (\n          <Arrow\n            styles={styles}\n            inverted={rtl ? kind === 'prev' : kind === 'next'}\n            disabled={\n              disableAll\n                ? disableAll\n                : kind === 'next'\n                ? stepsLength - 1 === currentStep\n                : currentStep === 0\n            }\n          />\n        ) : null}\n        {children}\n      </button>\n    )\n  }\n\n  return (\n    <div css={getStyles('controls', {})} dir={rtl ? 'rtl' : 'ltr'}>\n      {!hideButtons ? (\n        prevButton && typeof prevButton === 'function' ? (\n          prevButton({\n            Button,\n            setCurrentStep,\n            currentStep,\n            stepsLength,\n            setIsOpen,\n          })\n        ) : (\n          <Button kind=\"prev\" />\n        )\n      ) : null}\n      <div css={getStyles('navigation', {})}>\n        {Array.from({ length: stepsLength }, (_, i) => i).map(index => {\n          return (\n            <button\n              css={getStyles('dot', {\n                current: index === currentStep,\n                disabled: disableDots || disableAll,\n              })}\n              onClick={() => {\n                if (!disableDots && !disableAll) setCurrentStep(index)\n              }}\n              key={`navigation_dot_${index}`}\n              aria-label={\n                steps[index]?.navDotAriaLabel || `Go to step ${index + 1}`\n              }\n            />\n          )\n        })}\n      </div>\n      {!hideButtons ? (\n        nextButton && typeof nextButton === 'function' ? (\n          nextButton({\n            Button,\n            setCurrentStep,\n            currentStep,\n            stepsLength,\n            setIsOpen,\n          })\n        ) : (\n          <Button />\n        )\n      ) : null}\n    </div>\n  )\n}\n\ntype BaseProps = {\n  styles?: StylesObj\n}\n\nexport type NavigationProps = BaseProps & {\n  setCurrentStep: Dispatch<React.SetStateAction<number>>\n  steps: StepType[]\n  currentStep: number\n  disableDots?: boolean\n  nextButton?: (props: BtnFnProps) => void\n  prevButton?: (props: BtnFnProps) => void\n  setIsOpen: Dispatch<React.SetStateAction<Boolean>>\n  hideButtons?: boolean\n  hideDots?: boolean\n  disableAll?: boolean\n  rtl?: boolean\n  Arrow?: ComponentType<ArrowProps>\n}\n\nexport default Navigation\n\nexport type ArrowProps = BaseProps & {\n  inverted?: Boolean\n  disabled?: Boolean\n}\n\nexport const DefaultArrow: React.FC<ArrowProps> = ({\n  styles = {},\n  inverted = false,\n  disabled,\n}) => {\n  const getStyles = stylesMatcher(styles)\n  return (\n    <svg\n      viewBox=\"0 0 18.4 14.4\"\n      css={getStyles('arrow', { inverted, disabled })}\n    >\n      <path\n        d={\n          inverted\n            ? 'M17 7.2H1M10.8 1L17 7.2l-6.2 6.2'\n            : 'M1.4 7.2h16M7.6 1L1.4 7.2l6.2 6.2'\n        }\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        strokeMiterlimit=\"10\"\n      />\n    </svg>\n  )\n}\n","import { ComponentType } from 'react'\nimport Badge, { BadgeProps } from './Badge'\nimport Close, { CloseProps } from './Close'\nimport Content, { ContentProps } from './Content'\nimport Navigation, {\n  NavigationProps,\n  DefaultArrow as Arrow,\n  ArrowProps,\n} from './Navigation'\n\nexport interface PopoverComponents {\n  Badge: ComponentType<BadgeProps>\n  Close: ComponentType<CloseProps>\n  Content: ComponentType<ContentProps>\n  Navigation: ComponentType<NavigationProps>\n  Arrow: ComponentType<ArrowProps>\n}\n\nexport type PopoverComponentsType = Partial<PopoverComponents>\n\nexport const components = {\n  Badge,\n  Close,\n  Content,\n  Navigation,\n  Arrow,\n}\n\nexport type PopoverComponentGeneric = typeof components\n\nexport const defaultComponents = (\n  comps: PopoverComponentsType\n): PopoverComponentGeneric =>\n  ({\n    ...components,\n    ...comps,\n  } as PopoverComponentGeneric)\n","/** @jsx jsx */\nimport { jsx } from '@emotion/react'\nimport React from 'react'\nimport { defaultComponents } from './index'\nimport { PopoverContentProps } from '../types'\n\nconst PopoverContent: React.FC<PopoverContentProps> = ({\n  styles,\n  components = {},\n  badgeContent,\n  accessibilityOptions,\n  disabledActions,\n  onClickClose,\n  steps,\n  setCurrentStep,\n  currentStep,\n  transition,\n  isHighlightingObserved,\n  setIsOpen,\n  nextButton,\n  prevButton,\n  disableDotsNavigation,\n  rtl,\n  showPrevNextButtons = true,\n  showCloseButton = true,\n  showNavigation = true,\n  showBadge = true,\n}) => {\n  const step = steps[currentStep]\n  const { Badge, Close, Content, Navigation, Arrow } = defaultComponents(\n    components\n  )\n\n  const badge =\n    badgeContent && typeof badgeContent === 'function'\n      ? badgeContent({\n          currentStep,\n          totalSteps: steps.length,\n          transition,\n        })\n      : currentStep + 1\n\n  function closeClickHandler() {\n    if (!disabledActions) {\n      if (onClickClose && typeof onClickClose === 'function') {\n        onClickClose({ setCurrentStep, setIsOpen, currentStep })\n      } else {\n        setIsOpen(false)\n      }\n    }\n  }\n\n  return (\n    <React.Fragment>\n      {showBadge ? <Badge styles={styles}>{badge}</Badge> : null}\n      {showCloseButton ? (\n        <Close\n          styles={styles}\n          aria-label={accessibilityOptions?.closeButtonAriaLabel}\n          disabled={disabledActions}\n          onClick={closeClickHandler}\n        />\n      ) : null}\n      <Content\n        content={step?.content}\n        setCurrentStep={setCurrentStep}\n        currentStep={currentStep}\n        transition={transition}\n        isHighlightingObserved={isHighlightingObserved}\n        setIsOpen={setIsOpen}\n      />\n      {showNavigation ? (\n        <Navigation\n          setCurrentStep={setCurrentStep}\n          currentStep={currentStep}\n          setIsOpen={setIsOpen}\n          steps={steps}\n          styles={styles}\n          aria-hidden={!accessibilityOptions?.showNavigationScreenReaders}\n          nextButton={nextButton}\n          prevButton={prevButton}\n          disableDots={disableDotsNavigation}\n          hideButtons={!showPrevNextButtons}\n          disableAll={disabledActions}\n          rtl={rtl}\n          Arrow={Arrow}\n        />\n      ) : null}\n    </React.Fragment>\n  )\n}\n\nexport default PopoverContent\n","import React, { useEffect } from 'react'\nimport { Portal, Observables } from '@reactour/utils'\nimport { Mask } from '@reactour/mask'\nimport { Popover } from '@reactour/popover'\nimport { FocusScope } from '@react-aria/focus'\nimport { useSizes } from './hooks'\nimport { TourProps, Padding } from './types'\nimport Keyboard from './Keyboard'\nimport PopoverContent from './components/PopoverContent'\n\nconst Tour: React.FC<TourProps> = ({\n  currentStep,\n  setCurrentStep,\n  setIsOpen,\n  steps = [],\n  styles: globalStyles = {},\n  scrollSmooth,\n  afterOpen,\n  beforeClose,\n  padding = 10,\n  position,\n  onClickMask,\n  onClickHighlighted,\n  className = 'reactour__popover',\n  maskClassName = 'reactour__mask',\n  highlightedMaskClassName,\n  disableInteraction,\n  disableFocusLock,\n  disableKeyboardNavigation,\n  inViewThreshold,\n  disabledActions,\n  setDisabledActions,\n  rtl,\n  accessibilityOptions = {\n    closeButtonAriaLabel: 'Close Tour',\n    showNavigationScreenReaders: true,\n  },\n  ContentComponent,\n  ...popoverProps\n}) => {\n  const step = steps[currentStep]\n  const styles = step?.styles || globalStyles\n\n  const {\n    sizes,\n    transition,\n    observableRefresher,\n    isHighlightingObserved,\n    target,\n  } = useSizes(step, {\n    block: 'center',\n    behavior: scrollSmooth ? 'smooth' : 'auto',\n    inViewThreshold,\n  })\n\n  useEffect(() => {\n    if (afterOpen && typeof afterOpen === 'function') {\n      afterOpen(target)\n    }\n    return () => {\n      if (beforeClose && typeof beforeClose === 'function') {\n        beforeClose(target)\n      }\n    }\n  }, [])\n\n  const { maskPadding, popoverPadding } = getPadding(step?.padding || padding)\n\n  function maskClickHandler() {\n    if (!disabledActions) {\n      if (onClickMask && typeof onClickMask === 'function') {\n        onClickMask({ setCurrentStep, setIsOpen, currentStep, steps })\n      } else {\n        setIsOpen(false)\n      }\n    }\n  }\n\n  const doDisableInteraction = step?.stepInteraction\n    ? !step?.stepInteraction\n    : disableInteraction\n\n  useEffect(() => {\n    if (step?.action && typeof step?.action === 'function') {\n      step?.action(target)\n    }\n\n    if (step?.disableActions !== undefined) {\n      setDisabledActions(step?.disableActions)\n    }\n  }, [step])\n\n  const popoverPosition = transition\n    ? 'center'\n    : step?.position\n    ? step?.position\n    : position\n\n  return step ? (\n    <Portal>\n      <FocusManager disabled={disableFocusLock}>\n        <Observables\n          mutationObservables={step?.mutationObservables}\n          resizeObservables={step?.resizeObservables}\n          refresh={observableRefresher}\n        />\n\n        <Keyboard\n          setCurrentStep={setCurrentStep}\n          setIsOpen={setIsOpen}\n          stepsLength={steps.length}\n          disableKeyboardNavigation={disableKeyboardNavigation}\n          disable={disabledActions}\n          rtl={rtl}\n        />\n\n        <Mask\n          sizes={sizes}\n          onClick={maskClickHandler}\n          styles={{\n            highlightedArea: (base: any) => ({\n              ...base,\n              display: doDisableInteraction ? 'block' : 'none',\n            }),\n            ...styles,\n          }}\n          padding={maskPadding}\n          highlightedAreaClassName={highlightedMaskClassName}\n          className={maskClassName}\n          onClickHighlighted={onClickHighlighted}\n        />\n\n        <Popover\n          sizes={sizes}\n          styles={styles}\n          position={popoverPosition}\n          padding={popoverPadding}\n          aria-labelledby={accessibilityOptions?.ariaLabelledBy}\n          className={className}\n          refresher={currentStep}\n        >\n          {ContentComponent ? (\n            <ContentComponent\n              styles={styles}\n              setCurrentStep={setCurrentStep}\n              currentStep={currentStep}\n              setIsOpen={setIsOpen}\n              steps={steps}\n              accessibilityOptions={accessibilityOptions}\n              disabledActions={disabledActions}\n              transition={transition}\n              isHighlightingObserved={isHighlightingObserved}\n              rtl={rtl}\n              {...popoverProps}\n            />\n          ) : (\n            <PopoverContent\n              styles={styles}\n              setCurrentStep={setCurrentStep}\n              currentStep={currentStep}\n              setIsOpen={setIsOpen}\n              steps={steps}\n              accessibilityOptions={accessibilityOptions}\n              disabledActions={disabledActions}\n              transition={transition}\n              isHighlightingObserved={isHighlightingObserved}\n              rtl={rtl}\n              {...popoverProps}\n            />\n          )}\n        </Popover>\n      </FocusManager>\n    </Portal>\n  ) : null\n}\n\nexport default Tour\n\nexport interface CustomCSS extends React.CSSProperties {\n  rx: number\n}\n\nconst FocusManager: React.FC<FocusProps> = ({ disabled, children }) => {\n  return disabled ? (\n    <>{children}</>\n  ) : (\n    <FocusScope contain autoFocus restoreFocus>\n      {children}\n    </FocusScope>\n  )\n}\n\ntype FocusProps = {\n  disabled?: boolean\n}\n\nfunction getPadding(padding?: Padding) {\n  if (typeof padding === 'object' && padding !== null) {\n    return {\n      maskPadding: padding.mask,\n      popoverPadding: padding.popover,\n    }\n  }\n  return {\n    maskPadding: padding,\n    popoverPadding: padding,\n  }\n}\n","import React, { useState, useContext } from 'react'\n// import { useControllableState } from '@chakra-ui/hooks'\n\nimport Tour from './Tour'\nimport { ProviderProps, TourProps } from './types'\n\nconst defaultState = {\n  isOpen: false,\n  setIsOpen: () => false,\n  currentStep: 0,\n  setCurrentStep: () => 0,\n  steps: [],\n  setSteps: () => [],\n  disabledActions: false,\n  setDisabledActions: () => false,\n  components: {},\n}\n\nconst TourContext = React.createContext<TourProps>(defaultState)\n\nconst TourProvider: React.FC<ProviderProps> = ({\n  children,\n  defaultOpen = false,\n  startAt = 0,\n  steps: defaultSteps,\n  setCurrentStep: customSetCurrentStep,\n  currentStep: customCurrentStep,\n  ...props\n}) => {\n  const [isOpen, setIsOpen] = useState(defaultOpen)\n  const [currentStep, setCurrentStep] = useState(startAt)\n  const [steps, setSteps] = useState(defaultSteps)\n  const [disabledActions, setDisabledActions] = useState(false)\n\n  const value = {\n    isOpen,\n    setIsOpen,\n    currentStep: customCurrentStep || currentStep,\n    setCurrentStep: customSetCurrentStep || setCurrentStep,\n    steps,\n    setSteps,\n    disabledActions,\n    setDisabledActions,\n    ...props,\n  }\n\n  return (\n    <TourContext.Provider value={value}>\n      {children}\n      {isOpen ? <Tour {...value} /> : null}\n    </TourContext.Provider>\n  )\n}\n\nexport { TourProvider }\n\nexport default TourContext\n\nexport function useTour() {\n  return useContext(TourContext)\n}\n","import React from 'react'\nimport { useTour } from './Context'\n\nexport default function withTour<P>(WrappedComponent: React.ComponentType<P>) {\n  const ComponentWithTour = (props: P) => {\n    const tourProps = useTour()\n    return <WrappedComponent {...props} {...tourProps} />\n  }\n  return ComponentWithTour\n}\n"],"names":["initialState","bottom","height","left","right","top","width","windowWidth","windowHeight","useSizes","step","scrollOptions","block","behavior","inViewThreshold","useState","transition","setTransition","observing","setObserving","isHighlightingObserved","setIsHighlightingObserved","refresher","setRefresher","dimensions","setdDimensions","target","selector","Element","document","querySelector","handleResize","useCallback","getHighlightedRect","highlightedSelectors","bypassElem","useEffect","window","addEventListener","removeEventListener","isInView","inView","threshold","smoothScroll","then","Date","now","observableRefresher","hasHighligtedElems","dimesions","sizes","node","getWindow","w","h","getRect","attrs","altAttrs","element","style","display","visibility","rect","bypassable","Keyboard","disableKeyboardNavigation","setCurrentStep","setIsOpen","stepsLength","disable","rtl","keyDownHandler","e","stopPropagation","isEscDisabled","isRightDisabled","isLeftDisabled","includes","next","c","Math","min","prev","max","keyCode","preventDefault","defaultStyles","badge","position","fontFamily","background","lineHeight","paddingLeft","paddingRight","fontSize","borderRadius","color","textAlign","boxShadow","controls","marginTop","alignItems","justifyContent","navigation","counterReset","flexWrap","button","disabled","padding","border","cursor","arrow","flex","dot","current","showNumber","counterIncrement","margin","transform","content","opacity","backgroundColor","close","stylesMatcher","styles","key","state","base","custom","Badge","children","getStyles","jsx","css","Close","onClick","props","viewBox","role","fill","d","Content","currentStep","Navigation","steps","nextButton","prevButton","disableDots","hideButtons","disableAll","Arrow","DefaultArrow","length","Button","kind","hideArrow","clickHandler","inverted","dir","Array","from","_","i","map","index","navDotAriaLabel","stroke","strokeWidth","strokeLinecap","strokeMiterlimit","components","defaultComponents","comps","PopoverContent","badgeContent","accessibilityOptions","disabledActions","onClickClose","disableDotsNavigation","showPrevNextButtons","showCloseButton","showNavigation","showBadge","totalSteps","closeClickHandler","React","Fragment","closeButtonAriaLabel","showNavigationScreenReaders","Tour","globalStyles","scrollSmooth","afterOpen","beforeClose","onClickMask","onClickHighlighted","className","maskClassName","highlightedMaskClassName","disableInteraction","disableFocusLock","setDisabledActions","ContentComponent","popoverProps","getPadding","maskPadding","popoverPadding","maskClickHandler","doDisableInteraction","stepInteraction","action","disableActions","undefined","popoverPosition","Portal","FocusManager","Observables","mutationObservables","resizeObservables","refresh","Mask","highlightedArea","highlightedAreaClassName","Popover","ariaLabelledBy","FocusScope","contain","autoFocus","restoreFocus","mask","popover","defaultState","isOpen","setSteps","TourContext","createContext","TourProvider","defaultOpen","startAt","defaultSteps","customSetCurrentStep","customCurrentStep","value","Provider","useTour","useContext","withTour","WrappedComponent","ComponentWithTour","tourProps"],"mappings":"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"}